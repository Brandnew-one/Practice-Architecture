# 클린 아키텍처

## 1) 클린 아키텍처의 등장 배경

클린 아키텍처는 엉클밥 아저씨가 만든 아키텍처 인데 대체 왜 엉클밥 아저씨가 이 아키텍처를 만들게 되었는지 부터 확인해보자.

- [Hexagonal Architecture](http://alistair.cockburn.us/Hexagonal+architecture) (a.k.a. Ports and Adapters) by Alistair Cockburn and adopted by Steve Freeman, and Nat Pryce in their wonderful book [Growing Object Oriented Software](http://www.amazon.com/Growing-Object-Oriented-Software-Guided-Tests/dp/0321503627)
- [Onion Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/) by Jeffrey Palermo
- [Screaming Architecture](http://blog.cleancoders.com/2011-09-30-Screaming-Architecture) from a blog of mine last year
- [DCI](http://www.amazon.com/Lean-Architecture-Agile-Software-Development/dp/0470684208/) from James Coplien, and Trygve Reenskaug.
- [BCE](http://www.amazon.com/Object-Oriented-Software-Engineering-Approach/dp/0201544350) by Ivar Jacobson from his book *Object Oriented Software Engineering: A Use-Case Driven Approach*

지금까지 위 처럼 다양한 아키텍처들이 만들어졌는데, 자세히 들여다 보니 핵심은 `separation of concerns` 으로전부 다 같더라. 세세한 부분으로 들어가면 위의 아키텍처가 모두 다른 부분들이 있겠지만 본질적으로 layer를 나누어서 분리한다는 개념자체가 동일하기 때문에 이런 아키텍처 개념들을 통합하기 위해 클린 아키텍처가 등장했다. (그럼 이것만 해체분석 하면..?)

![Untitled](%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%86%AB%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%2009784558b5ca47688703713aa7c91869/Untitled.png)

## 2) Dependency Rule

클린 아키텍처를 공부하지 않은 사람들도 위의 양궁장 과녁판은 한번씩 본적 있을거라 생각한다. 곁눈질로만 봐도 어지러워 보이지만 클린 아키텍처의 가장 중요한 핵심이기 때문에 하나씩 뜯어보자.

![Untitled](%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%86%AB%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%2009784558b5ca47688703713aa7c91869/Untitled%201.png)

일단 각 원들이 무엇을 의미하는지는 잠시후에 알아보도록 하고, 클린 아키텍처의 가장 핵심인 의존성 규칙을 알아보자.

1. 소스 코드는 안쪽을 향해서만 의존할 수 있음
2. 안쪽의 원은 바깥쪽 원을 알지 못함(바깥쪽의 원에서 선언된 어떠한 이름을 안쪽 원에서 참조해서는 안된다.)

사실 글로만 봐서는 어떻게 이런 의존성을 가질지 잘 와닿지는 않지만 `바깥쪽 원이 안쪽원에 영향을 주면 안된다.`

정도로 이해하고 이후에 코드를 확인 해보자

## 3) 각 원들의 의미

[https://github.com/kudoleh/iOS-Clean-Architecture-MVVM](https://github.com/kudoleh/iOS-Clean-Architecture-MVVM)

엉클밥 아저씨가 쓴 블로그와 유명한 예제를 보면서 안쪽원 부터 바깥원 쪽으로 가면서 하나씩 분석해보자

### 3-1) Entity(*Enterprise wide* business rules)

Entity는 가장 일반적이면서 고수준의 규칙을 캡슐화한다. 바깥쪽에서 무엇이 변경되더라도 바뀌지 않는다.